
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8"><title>LaunchIQ - Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"></head>
<body>
  <div th:replace="fragments/header :: header"></div>
  <main class="container mt-4">
    <h1>Dashboard</h1>
    <table class="table table-bordered">
      <thead><tr><th>ID</th><th>Suite</th><th>Product</th><th>Env</th><th>Browser</th><th>Status</th><th>Run Date</th></tr></thead>
      <tbody id="rows"></tbody>
    </table>
  </main>
  <div th:replace="fragments/footer :: footer"></div>
<script>
async function load() {
  const res = await fetch('/api/history');
  const rows = await res.json();
  const tbody = document.getElementById('rows');
  tbody.innerHTML = '';
  rows.forEach(r => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${r.id}</td><td>${r.suite_name}</td><td>${r.product}</td><td>${r.environment}</td><td>${r.browser}</td><td>${r.status}</td><td>${r.run_date}</td>`;
    tbody.appendChild(tr);
  });
}
load();
</script>
</body></html>
